<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Big Mike's Guitar Tabs - Tabs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Cutive Mono, arial;
      /* background-color: #222; */
      background: url("/assets/images/posbackground.jpeg");
      /* background-color: black; */
      
      background-size: cover;
      background-position: center center;
      padding-top: 0px !important;
      display: flex;
      /* justify-content: center;
        align-items: center; */
      /* height: 120vh; */
      white-space: nowrap;
      padding-right: 0 !important;
      z-index: 0 !important;
      
    }

     @media screen and (max-width: 434px) {
      body {
         font-family: Cutive Mono, arial;
      background-color: #222;
      background: url("https://i.imgur.com/wCrn7As.jpeg");
      /* background-repeat: no-repeat; */
      background-size: cover;
      background-position: center center;
      padding-top: 0px !important;
      display: flex;
      height: 140vh;
      padding-right: 0 !important;
      z-index: 0 !important;
      justify-content: center;
      }
    }

     @media screen and (max-width: 500px) {
      .container {
        width: 100%;
      }
    }
  
    @media screen and (max-width: 806px) {
      .myLogo {
        font-size: 16px !important;
      }
    }


  

  
     @media screen and (max-width: 561px) {
      .postBod {
        font-size: 14px !important;
        
      }
    }

      @media screen and (max-width: 466px) {
      .postBod {
        font-size: 12px !important;
      }
    }




    @media screen and (max-width: 400px) {
      .postBod {
        font-size: 11px !important;
      }
    }

      @media screen and (max-width: 358px) {
      .postBod {
        font-size: 10px !important;
      }
    }
  
    .nav-wrapper {
      background-color: black;
    }
  
    .brand-logo {
      margin-left: 1%;
    }
  
    .card-image {
      background-position: top !important;
      height: 300px;
    }
  
    .card {
      height: 410px;
    }
  
    .image-reveal {
      width: 100%;
    }
  
    .btn-floating {
      position: fixed;
      right: 20px;
      bottom: 10px;
    }
  
    .nav-wrapper a:hover {
      background: #ddd;
      color: black;
    }
  
    .viewPost {
      padding-bottom: 10px !important;
    }
  
    .homeDiv {
      margin-bottom: 0px;
    }
  
    .active {
      background-color: grey !important;
    }

    .postBod {
      white-space: pre-line;

      color: black;
    }
    .spacerRow {
      height: 10vh;
      background-color: transparent;
    }

    .spacerBottom {
      height: 5vh;
      background-color: transparent;
    }

    .whiteSpaceNorm {
      white-space: normal;
    }

      /* search animation css start */


    .showNav {
      -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -o-transition: all 1s ease;
    transition: all 1s ease;
    width: 11vw !important;
    }

    .hidden {
      opacity: 0;
      width: 0px !important;
    }

     #autocomplete-input{
    -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -o-transition: all 1s ease;
    transition: all 1s ease;
    }

    #autocomplete-input-mobile{
    -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -o-transition: all 1s ease;
    transition: all 1s ease;
    }

    .notActive {
      background-color: transparent !important;
    }

    
  
  /* search animation end */
  </style>
</head>
<body>


<div class="navbar-fixed">
  <nav>
    <div class="nav-wrapper black">
      <a href="/" class="brand-logo myLogo" id="logoButton">BigMike's Guitar Tabs</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li id="homePage"><a href="/">Home</a></li>
        <!-- <li id="tabs"><a href="/tabs">Tabs</a></li> -->
        <li id="profilePage"><a href="/profile">My Profile</a></li>
        <li id="createNav"><a href="/create">Create</a></li>
        <li id="aboutPage"><a href="/about">About</a></li>
        <li>
          <div class="input-field white-text">
            <i class="white-text material-icons prefix notActive" id="mySearch">search</i>
            <input type="text" placeholder="search" id="autocomplete-input" class="autocomplete white-text hidden">
          </div>
        </li>
        <li id="signOutConditional"></li>

      </ul>
    </div>
  </nav>
</div>
<ul class="sidenav" id="mobile-demo" style="width: 50vw;">
  <li id="homePageNav"><a href="/">Home</a></li>
  <li id="profilePageNav"><a href="/profile">My Profile</a></li>
  <li id="createSideNav"><a href="/create">Create</a></li>
  <li id="aboutPageNav"><a href="/about">About</a></li>
  <div class="input-field col s6 s12 black-text">
    <i id="mySearchMobile" class="black-text material-icons prefix notActive">search</i>
    <input type="text" placeholder="search" id="autocomplete-input-mobile" class="autocomplete black-text hidden">
  </div>
  <li id="signOutNav"></li>
</ul>






<div class="container">
  <div class="row spacerRow"></div>
  <div class="row center">
    <!-- <h1 class="section white-text homeDiv">Home</h1> -->
    <h4 id="postSong" class="white-text whiteSpaceNorm"></h4>
    <h4 id="postArtist" class="white-text"></h4>
    <h5 id="postUser" class="white-text"></h5>
  </div>
 
  <div id="postBody" class="#fafafa grey lighten-5 postBod center row"></div>
  <div class="spacerBottom"></div>
  

  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>

    //js for searchbar animation
      document.getElementById('mySearch').addEventListener('click', event => {
        document.getElementById('autocomplete-input').classList.add('showNav')
        document.getElementById('autocomplete-input').classList.remove('hidden')
      })

      document.getElementById('mySearchMobile').addEventListener('click', event => {
        console.log('ping')
        document.getElementById('autocomplete-input-mobile').classList.remove('hidden')
      })


      //here we render the post by id that the user clicked on, 

      let postId = window.location.pathname

      // console.log(window.location, 'this is location')

      axios.get(`/api/${postId}`, {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        }
      })
        .then(({ data }) => {
          // console.log(data, 'this is post data')
          //get req or offer

          //render post
          document.getElementById('postSong').innerHTML = data.song
          document.getElementById('postArtist').innerHTML = data.artist
          document.getElementById('postBody').innerHTML = data.body
          document.getElementById('postUser').innerHTML = `posted by: ${data.User.username}`


          //render the comment onto the page
          //     data.comments.forEach(comment => {
          //       document.getElementById('comments').innerHTML += `
          // <li class="collection-item #212121 grey darken-4 white-text">${comment.body}</li>
          // `
          //     })

        })
        .catch(err => console.log(err))


      function displaySignOut() {

        localStorage.getItem('token')
        if (localStorage.getItem("token") === null) {
          const signOut2 = document.createElement('li')
          signOut2.innerHTML = `
      <li id="logInButtonMain"><a href="/login">Log In</a></li>
      `
          document.getElementById('signOutConditional').append(signOut2)
          document.getElementById('logInButtonMain').addEventListener('click', event => {
            window.location = '/login'
          })


        } else {

          const signOut1 = document.createElement('li')
          signOut1.innerHTML = `
      <li id="signOutMain"><a href="/login">Sign Out</a></li>
      `
          document.getElementById('signOutConditional').append(signOut1)
          document.getElementById('signOutMain').addEventListener('click', event => {
            localStorage.removeItem('token')
            window.location = '/login'
          })

        }
      }

      function displaySignOutNav() {

        localStorage.getItem('token')
        if (localStorage.getItem("token") === null) {
          const signOut2 = document.createElement('li')
          signOut2.innerHTML = `
      <li id="logInButtonNav"><a href="/login">Log In</a></li>
      `
          document.getElementById('signOutNav').append(signOut2)
          document.getElementById('logInButtonNav').addEventListener('click', event => {
            window.location = '/login'
          })
        } else {

          const signOut1 = document.createElement('li')
          signOut1.innerHTML = `
      <li id="signOutButtonNav"><a href="/login">Sign Out</a></li>
      `
          document.getElementById('signOutNav').append(signOut1)
          document.getElementById('signOutButtonNav').addEventListener('click', event => {
            localStorage.removeItem('token')
            window.location = '/login'
          })
        }
      }


      displaySignOut()
      displaySignOutNav()

      //this is for hamburger, signout and navbar buttons

      //for hamburger menu
      document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('.sidenav');
        var instances = M.Sidenav.init(elems, {});
      });

      M.AutoInit();
      document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('select');
        var instances = M.FormSelect.init(elems, {});
      });


  </script>
</body>


</html>